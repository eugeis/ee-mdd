allprojects {
  group = 'ee.mdd'
  version = '1.0-SNAPSHOT'
}

subprojects {
  apply plugin: 'java'
  apply plugin: 'eclipse'
  apply plugin: 'groovy'
  apply plugin: 'maven'

  sourceCompatibility = 1.7
  targetCompatibility = 1.7

  [compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

  dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.3.2'
    compile group: 'org.slf4j', name:'slf4j-api', version: '1.7.12'
    runtime group: 'ch.qos.logback', name:'logback-classic', version: '1.1.3'
    testCompile 'junit:junit:4.+'
  }

  repositories {
    mavenLocal()
    mavenCentral()
  }

  jar {
    manifest {
      attributes 'Implementation-Title': 'Model Driven Development - DSL and Generator for several languages', 'Implementation-Version': version
    }

    task cleanAll << { task ->
      ['bin', 'target', 'build', 'dist', 'temp', '.idea', 'dist.zip'].each { name ->
        def file = new File("$task.project.name/$name")
        if(file.exists()) if(file.isDirectory())file.deleteDir() else file.delete()
      }
    }
  }

  defaultTasks 'build', 'install'
}